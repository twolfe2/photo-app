"use strict";var app=angular.module("myApp",["ui.router","ui.router","satellizer","ngFileUpload"]);app.config(["$authProvider",function(t){t.loginUrl="/api/users/login",t.signupUrl="/api/users/signup",t.facebook({clientId:"277768235911300",url:"/api/users/facebook"})}]),app.config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("home",{url:"/",templateUrl:"/html/home.html"}).state("register",{url:"/register",templateUrl:"/html/register.html",controller:"registerCtrl"}).state("login",{url:"/login",templateUrl:"/html/login.html",controller:"loginCtrl"}).state("images",{url:"/images",templateUrl:"/html/images.html",controller:"imagesCtrl",resolve:{Images:["Image",function(t){return t.getAll()}]}}).state("addImage",{url:"/addImage",templateUrl:"/html/addImage.html",controller:"addImageCtrl"}),e.otherwise("/")}]);var app=angular.module("myApp");app.controller("mainCtrl",["$scope","$state","$auth","$rootScope",function(t,e,o,r){t.isAuthenticated=function(){return o.isAuthenticated()},t.isAuthenticated()&&(r.currUser=o.getPayload()),t.logout=function(){o.logout(),e.go("home")}}]),app.controller("loginCtrl",["$scope","$state","$auth","$rootScope",function(t,e,o,r){t.login=function(){o.login(t.user).then(function(t){console.log("res",t),e.go("home")})["catch"](function(t){console.log("err",t)})}}]),app.controller("registerCtrl",["$scope","$state","$auth",function(t,e,o){t.register=function(){t.user.password!==t.user.password2?(t.user.password=null,t.user.password2=null,alert("Passwords do NOT match. Try again.")):o.signup(t.user).then(function(t){console.log("res",t),e.go("login")})["catch"](function(t){console.log("err",t)})}}]),app.controller("addImageCtrl",["$scope","$state","$auth","Upload",function(t,e,o,r){o.isAuthenticated()&&(t.addImage=function(){r.upload({url:"/api/images",data:{photo:t.photo,name:t.name}}).then(function(t){e.go("images")})})}]),app.controller("imagesCtrl",["$scope","Images",function(t,e){console.log("imagesCrtl"),console.log(t.file),t.images=e}]);var app=angular.module("myApp");app.service("Image",["$q","$http",function(t,e){this.getAll=function(){return e.get("api/images").then(function(t){return t.data})["catch"](function(t){t&&console.log(t)})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbnRyb2xsZXJzL2NvbnRyb2xsZXJzLmpzIiwic2VydmljZXMvc2VydmljZXMuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRhdXRoUHJvdmlkZXIiLCJsb2dpblVybCIsInNpZ251cFVybCIsImZhY2Vib29rIiwiY2xpZW50SWQiLCJ1cmwiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInN0YXRlIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwicmVzb2x2ZSIsIkltYWdlcyIsIkltYWdlIiwiZ2V0QWxsIiwib3RoZXJ3aXNlIiwiJHNjb3BlIiwiJHN0YXRlIiwiJGF1dGgiLCIkcm9vdFNjb3BlIiwiaXNBdXRoZW50aWNhdGVkIiwiY3VyclVzZXIiLCJnZXRQYXlsb2FkIiwibG9nb3V0IiwiZ28iLCJsb2dpbiIsInVzZXIiLCJ0aGVuIiwicmVzIiwiY29uc29sZSIsImxvZyIsImVyciIsInJlZ2lzdGVyIiwicGFzc3dvcmQiLCJwYXNzd29yZDIiLCJhbGVydCIsInNpZ251cCIsIlVwbG9hZCIsImFkZEltYWdlIiwidXBsb2FkIiwiZGF0YSIsInBob3RvIiwibmFtZSIsImZpbGUiLCJpbWFnZXMiLCJzZXJ2aWNlIiwiJHEiLCIkaHR0cCIsInRoaXMiLCJnZXQiXSwibWFwcGluZ3MiOiJBQUFBLFlBR0EsSUFBQUEsS0FBQUMsUUFBQUMsT0FBQSxTQUFBLFlBQUEsWUFBQSxhQUFBLGdCQUVBRixLQUFBRyxRQUFBLGdCQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLFNBQUEsbUJBQ0FELEVBQUFFLFVBQUEsb0JBRUFGLEVBQUFHLFVBQ0FDLFNBQUEsa0JBQ0FDLElBQUEsMkJBS0FULElBQUFHLFFBQUEsaUJBQUEscUJBQUEsU0FBQU8sRUFBQUMsR0FFQUQsRUFDQUUsTUFBQSxRQUNBSCxJQUFBLElBQ0FJLFlBQUEsb0JBRUFELE1BQUEsWUFDQUgsSUFBQSxZQUNBSSxZQUFBLHNCQUNBQyxXQUFBLGlCQUVBRixNQUFBLFNBQ0FILElBQUEsU0FDQUksWUFBQSxtQkFDQUMsV0FBQSxjQUVBRixNQUFBLFVBQ0FILElBQUEsVUFDQUksWUFBQSxvQkFDQUMsV0FBQSxhQUNBQyxTQUNBQyxRQUFBLFFBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBQyxjQUlBTixNQUFBLFlBQ0FILElBQUEsWUFDQUksWUFBQSxzQkFDQUMsV0FBQSxpQkFLQUgsRUFBQVEsVUFBQSxPQy9DQSxJQUFBbkIsS0FBQUMsUUFBQUMsT0FBQSxRQUtBRixLQUFBYyxXQUFBLFlBQUEsU0FBQSxTQUFBLFFBQUEsYUFBQSxTQUFBTSxFQUFBQyxFQUFBQyxFQUFBQyxHQUdBSCxFQUFBSSxnQkFBQSxXQUFBLE1BQUFGLEdBQUFFLG1CQUVBSixFQUFBSSxvQkFDQUQsRUFBQUUsU0FBQUgsRUFBQUksY0FFQU4sRUFBQU8sT0FBQSxXQUNBTCxFQUFBSyxTQUNBTixFQUFBTyxHQUFBLFlBaUJBNUIsSUFBQWMsV0FBQSxhQUFBLFNBQUEsU0FBQSxRQUFBLGFBQUEsU0FBQU0sRUFBQUMsRUFBQUMsRUFBQUMsR0FHQUgsRUFBQVMsTUFBQSxXQUNBUCxFQUFBTyxNQUFBVCxFQUFBVSxNQUNBQyxLQUFBLFNBQUFDLEdBQ0FDLFFBQUFDLElBQUEsTUFBQUYsR0FHQVgsRUFBQU8sR0FBQSxVQUxBTixTQU9BLFNBQUFhLEdBQ0FGLFFBQUFDLElBQUEsTUFBQUMsU0FRQW5DLElBQUFjLFdBQUEsZ0JBQUEsU0FBQSxTQUFBLFFBQUEsU0FBQU0sRUFBQUMsRUFBQUMsR0FHQUYsRUFBQWdCLFNBQUEsV0FDQWhCLEVBQUFVLEtBQUFPLFdBQUFqQixFQUFBVSxLQUFBUSxXQUNBbEIsRUFBQVUsS0FBQU8sU0FBQSxLQUNBakIsRUFBQVUsS0FBQVEsVUFBQSxLQUNBQyxNQUFBLHVDQUdBakIsRUFBQWtCLE9BQUFwQixFQUFBVSxNQUNBQyxLQUFBLFNBQUFDLEdBQ0FDLFFBQUFDLElBQUEsTUFBQUYsR0FDQVgsRUFBQU8sR0FBQSxXQUhBTixTQUtBLFNBQUFhLEdBQ0FGLFFBQUFDLElBQUEsTUFBQUMsU0FPQW5DLElBQUFjLFdBQUEsZ0JBQUEsU0FBQSxTQUFBLFFBQUEsU0FBQSxTQUFBTSxFQUFBQyxFQUFBQyxFQUFBbUIsR0FDQW5CLEVBQUFFLG9CQUNBSixFQUFBc0IsU0FBQSxXQUNBRCxFQUFBRSxRQUNBbEMsSUFBQSxjQUNBbUMsTUFBQUMsTUFBQXpCLEVBQUF5QixNQUFBQyxLQUFBMUIsRUFBQTBCLFFBRUFmLEtBQUEsU0FBQUMsR0FFQVgsRUFBQU8sR0FBQSxpQkFXQTVCLElBQUFjLFdBQUEsY0FBQSxTQUFBLFNBQUEsU0FBQU0sRUFBQUosR0FDQWlCLFFBQUFDLElBQUEsY0FDQUQsUUFBQUMsSUFBQWQsRUFBQTJCLE1BQ0EzQixFQUFBNEIsT0FBQWhDLElDcEdBLElBQUFoQixLQUFBQyxRQUFBQyxPQUFBLFFBR0FGLEtBQUFpRCxRQUFBLFNBQUEsS0FBQSxRQUFBLFNBQUFDLEVBQUFDLEdBRUFDLEtBQUFsQyxPQUFBLFdBQ0EsTUFBQWlDLEdBQUFFLElBQUEsY0FDQXRCLEtBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBWSxPQUZBTyxTQUlBLFNBQUFoQixHQUNBQSxHQUFBRixRQUFBQyxJQUFBQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cblxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdteUFwcCcsIFsndWkucm91dGVyJywgJ3VpLnJvdXRlcicsICdzYXRlbGxpemVyJywgJ25nRmlsZVVwbG9hZCddKTtcblxuYXBwLmNvbmZpZyhmdW5jdGlvbigkYXV0aFByb3ZpZGVyKSB7XG4gICRhdXRoUHJvdmlkZXIubG9naW5VcmwgPSAnL2FwaS91c2Vycy9sb2dpbic7XG4gICRhdXRoUHJvdmlkZXIuc2lnbnVwVXJsID0gJy9hcGkvdXNlcnMvc2lnbnVwJztcblxuICAkYXV0aFByb3ZpZGVyLmZhY2Vib29rKHtcbiAgICBjbGllbnRJZDogJzI3Nzc2ODIzNTkxMTMwMCcsXG4gICAgdXJsOiAnL2FwaS91c2Vycy9mYWNlYm9vaydcbiAgfSk7XG5cbn0pO1xuXG5hcHAuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAkc3RhdGVQcm92aWRlclxuICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgIHVybDogJy8nLFxuICAgICAgdGVtcGxhdGVVcmw6ICcvaHRtbC9ob21lLmh0bWwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ3JlZ2lzdGVyJywge1xuICAgICAgdXJsOiAnL3JlZ2lzdGVyJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAnL2h0bWwvcmVnaXN0ZXIuaHRtbCcsXG4gICAgICBjb250cm9sbGVyOiAncmVnaXN0ZXJDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdsb2dpbicsIHtcbiAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL2xvZ2luLmh0bWwnLFxuICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnaW1hZ2VzJywge1xuICAgICAgdXJsOiAnL2ltYWdlcycsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL2ltYWdlcy5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXI6ICdpbWFnZXNDdHJsJyxcbiAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgSW1hZ2VzOiBmdW5jdGlvbihJbWFnZSkge1xuICAgICAgICAgIHJldHVybiBJbWFnZS5nZXRBbGwoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdhZGRJbWFnZScsIHtcbiAgICAgIHVybDogJy9hZGRJbWFnZScsXG4gICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL2FkZEltYWdlLmh0bWwnLFxuICAgICAgY29udHJvbGxlcjogJ2FkZEltYWdlQ3RybCdcbiAgICB9KVxuXG5cblxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG59KSIsIid1c2Ugc3RyaWN0JztcblxuXG5cbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnKTtcblxuXG5cblxuYXBwLmNvbnRyb2xsZXIoJ21haW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsICRhdXRoLCAkcm9vdFNjb3BlKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdtYWluQ3RybCEnKTtcblxuICAkc2NvcGUuaXNBdXRoZW50aWNhdGVkID0gKCkgPT4gJGF1dGguaXNBdXRoZW50aWNhdGVkKCk7XG5cbiAgaWYgKCRzY29wZS5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuICAgICRyb290U2NvcGUuY3VyclVzZXIgPSAkYXV0aC5nZXRQYXlsb2FkKCk7XG4gIH1cbiAgJHNjb3BlLmxvZ291dCA9ICgpID0+IHtcbiAgICAkYXV0aC5sb2dvdXQoKTtcbiAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgfTtcblxuICAvLyAkc2NvcGUuYXV0aGVudGljYXRlID0gcHJvdmlkZXIgPT4ge1xuICAvLyAgICRhdXRoLmF1dGhlbnRpY2F0ZShwcm92aWRlcilcbiAgLy8gICAgIC50aGVuKHJlcyA9PiB7XG4gIC8vICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAvLyAgICAgfSlcbiAgLy8gICAgIC5jYXRjaChlcnIgPT4ge1xuICAvLyAgICAgICBjb25zb2xlLmxvZygnZXJyOicsIGVycik7XG4gIC8vICAgICB9KTtcbiAgLy8gfTtcblxufSk7XG5cblxuXG5hcHAuY29udHJvbGxlcignbG9naW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsICRhdXRoLCAkcm9vdFNjb3BlKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdsb2dpbkN0cmwhJyk7XG5cbiAgJHNjb3BlLmxvZ2luID0gKCkgPT4ge1xuICAgICRhdXRoLmxvZ2luKCRzY29wZS51c2VyKVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3JlcycsIHJlcyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCRhdXRoLmdldFBheWxvYWQoKSk7XG5cbiAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpO1xuICAgICAgfSlcblxuICB9O1xufSk7XG5cblxuXG5hcHAuY29udHJvbGxlcigncmVnaXN0ZXJDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsICRhdXRoKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdyZWdpc3RlckN0cmwhJyk7XG5cbiAgJHNjb3BlLnJlZ2lzdGVyID0gKCkgPT4ge1xuICAgIGlmICgkc2NvcGUudXNlci5wYXNzd29yZCAhPT0gJHNjb3BlLnVzZXIucGFzc3dvcmQyKSB7XG4gICAgICAkc2NvcGUudXNlci5wYXNzd29yZCA9IG51bGw7XG4gICAgICAkc2NvcGUudXNlci5wYXNzd29yZDIgPSBudWxsO1xuICAgICAgYWxlcnQoJ1Bhc3N3b3JkcyBkbyBOT1QgbWF0Y2guIFRyeSBhZ2Fpbi4nKVxuICAgIH0gZWxzZSB7XG5cbiAgICAgICRhdXRoLnNpZ251cCgkc2NvcGUudXNlcilcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygncmVzJywgcmVzKTtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIpO1xuICAgICAgICB9KVxuICAgIH1cblxuICB9O1xufSk7XG5cbmFwcC5jb250cm9sbGVyKCdhZGRJbWFnZUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgJGF1dGgsIFVwbG9hZCkge1xuICBpZiAoJGF1dGguaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAkc2NvcGUuYWRkSW1hZ2UgPSAoKSA9PiB7XG4gICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgdXJsOiAnL2FwaS9pbWFnZXMnLFxuICAgICAgICBkYXRhOiB7cGhvdG86ICRzY29wZS5waG90bywgbmFtZTogJHNjb3BlLm5hbWV9XG4gICAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgJHN0YXRlLmdvKCdpbWFnZXMnKTtcbiAgICAgIH0pO1xuXG4gICAgfTtcbiAgfTtcblxufSk7XG5cblxuXG5cbmFwcC5jb250cm9sbGVyKCdpbWFnZXNDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBJbWFnZXMpIHtcbiAgY29uc29sZS5sb2coJ2ltYWdlc0NydGwnKTtcbiAgY29uc29sZS5sb2coJHNjb3BlLmZpbGUpO1xuICAkc2NvcGUuaW1hZ2VzID0gSW1hZ2VzO1xufSk7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnKTtcblxuXG5hcHAuc2VydmljZSgnSW1hZ2UnLCBmdW5jdGlvbigkcSwgJGh0dHApe1xuXG4gIHRoaXMuZ2V0QWxsID0gKCkgPT4ge1xuICAgIHJldHVybiAkaHR0cC5nZXQoJ2FwaS9pbWFnZXMnKVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgcmV0dXJuIHJlcy5kYXRhO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICBpZihlcnIpIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICB9O1xuICBcbn0pO1xuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
